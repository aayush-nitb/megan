"use strict";
var _this = this;
var mongoose = require('mongoose');
var timeFormat = /^(\d\d):(\d\d)$/;
module.exports = mongoose.model('courses', new mongoose.Schema({
    name: { type: String, required: true, unique: true, trim: true },
    start: { type: String, required: true, trim: true },
    details: { type: String },
    validationErrors: function () {
        var errors = [];
        if (_this.name === '') {
            errors.push({
                attribute: 'name',
                message: 'name cannot be empty'
            });
        }
        if (timeFormat.test(_this.start)) {
            var ticks = timeFormat.exec(_this.start);
            var mm = parseInt(ticks[1]);
            var ss = parseInt(ticks[2]);
            if (mm > 23 || mm < 0 || ss > 23 || ss < 0) {
                errors.push({
                    attribute: 'start',
                    message: 'start time is invalid'
                });
            }
        }
        else {
            errors.push({
                attribute: 'start',
                message: 'start time must be in format mm:ss'
            });
        }
        return errors;
    }
}));

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwaS92MS9tb2RlbHMvTW9kZWxfQ291cnNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxpQkFtQ0k7QUFuQ0osSUFBWSxRQUFRLFdBQU0sVUFFMUIsQ0FBQyxDQUZtQztBQUVwQyxJQUFNLFVBQVUsR0FBRyxpQkFBaUIsQ0FBQztBQUVyQyxpQkFBUyxRQUFRLENBQUMsS0FBSyxDQUFDLFNBQVMsRUFBRSxJQUFJLFFBQVEsQ0FBQyxNQUFNLENBQUM7SUFDckQsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtJQUNoRSxLQUFLLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRTtJQUNuRCxPQUFPLEVBQUUsRUFBRSxJQUFJLEVBQUUsTUFBTSxFQUFFO0lBRXpCLGdCQUFnQixFQUFFO1FBQ2hCLElBQUksTUFBTSxHQUFHLEVBQUUsQ0FBQztRQUNoQixFQUFFLENBQUMsQ0FBQyxLQUFJLENBQUMsSUFBSSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDckIsTUFBTSxDQUFDLElBQUksQ0FBQztnQkFDVixTQUFTLEVBQUUsTUFBTTtnQkFDakIsT0FBTyxFQUFFLHNCQUFzQjthQUNoQyxDQUFDLENBQUM7UUFDTCxDQUFDO1FBQ0QsRUFBRSxDQUFDLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxLQUFJLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ2hDLElBQUksS0FBSyxHQUFHLFVBQVUsQ0FBQyxJQUFJLENBQUMsS0FBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3hDLElBQUksRUFBRSxHQUFHLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUM1QixJQUFJLEVBQUUsR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFDNUIsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxJQUFJLEVBQUUsR0FBRyxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7Z0JBQzNDLE1BQU0sQ0FBQyxJQUFJLENBQUM7b0JBQ1YsU0FBUyxFQUFFLE9BQU87b0JBQ2xCLE9BQU8sRUFBRSx1QkFBdUI7aUJBQ2pDLENBQUMsQ0FBQztZQUNMLENBQUM7UUFDSCxDQUFDO1FBQUMsSUFBSSxDQUFDLENBQUM7WUFDTixNQUFNLENBQUMsSUFBSSxDQUFDO2dCQUNWLFNBQVMsRUFBRSxPQUFPO2dCQUNsQixPQUFPLEVBQUUsb0NBQW9DO2FBQzlDLENBQUMsQ0FBQztRQUNMLENBQUM7UUFDRCxNQUFNLENBQUMsTUFBTSxDQUFDO0lBQ2hCLENBQUM7Q0FDRixDQUFDLENBQUMsQ0FBQyIsImZpbGUiOiJhcGkvdjEvbW9kZWxzL01vZGVsX0NvdXJzZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJ1xyXG5cclxuY29uc3QgdGltZUZvcm1hdCA9IC9eKFxcZFxcZCk6KFxcZFxcZCkkLztcclxuXHJcbmV4cG9ydCA9IG1vbmdvb3NlLm1vZGVsKCdjb3Vyc2VzJywgbmV3IG1vbmdvb3NlLlNjaGVtYSh7XHJcbiAgbmFtZTogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB1bmlxdWU6IHRydWUsIHRyaW06IHRydWUgfSxcclxuICBzdGFydDogeyB0eXBlOiBTdHJpbmcsIHJlcXVpcmVkOiB0cnVlLCB0cmltOiB0cnVlIH0sXHJcbiAgZGV0YWlsczogeyB0eXBlOiBTdHJpbmcgfSxcclxuXHJcbiAgdmFsaWRhdGlvbkVycm9yczogKCkgPT4ge1xyXG4gICAgbGV0IGVycm9ycyA9IFtdO1xyXG4gICAgaWYgKHRoaXMubmFtZSA9PT0gJycpIHtcclxuICAgICAgZXJyb3JzLnB1c2goe1xyXG4gICAgICAgIGF0dHJpYnV0ZTogJ25hbWUnLFxyXG4gICAgICAgIG1lc3NhZ2U6ICduYW1lIGNhbm5vdCBiZSBlbXB0eSdcclxuICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBpZiAodGltZUZvcm1hdC50ZXN0KHRoaXMuc3RhcnQpKSB7XHJcbiAgICAgIGxldCB0aWNrcyA9IHRpbWVGb3JtYXQuZXhlYyh0aGlzLnN0YXJ0KTtcclxuICAgICAgbGV0IG1tID0gcGFyc2VJbnQodGlja3NbMV0pO1xyXG4gICAgICBsZXQgc3MgPSBwYXJzZUludCh0aWNrc1syXSk7XHJcbiAgICAgIGlmIChtbSA+IDIzIHx8IG1tIDwgMCB8fCBzcyA+IDIzIHx8IHNzIDwgMCkge1xyXG4gICAgICAgIGVycm9ycy5wdXNoKHtcclxuICAgICAgICAgIGF0dHJpYnV0ZTogJ3N0YXJ0JyxcclxuICAgICAgICAgIG1lc3NhZ2U6ICdzdGFydCB0aW1lIGlzIGludmFsaWQnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGVycm9ycy5wdXNoKHtcclxuICAgICAgICBhdHRyaWJ1dGU6ICdzdGFydCcsXHJcbiAgICAgICAgbWVzc2FnZTogJ3N0YXJ0IHRpbWUgbXVzdCBiZSBpbiBmb3JtYXQgbW06c3MnXHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGVycm9ycztcclxuICB9XHJcbn0pKTsiXX0=
